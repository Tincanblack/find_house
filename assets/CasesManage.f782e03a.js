import{A as T}from"./AdminBreadcrumb.67b9a502.js";import{m as D,P as q,D as A}from"./DelConfirmModal.aab645ab.js";import{_ as L,o as d,c,b as e,n as k,d as l,x as C,v as u,s as U,F as x,y as M,z as w,A as i,B as y,t as n,e as F,r as h,a as _,f as V,u as p}from"./index.e276e35f.js";import"./base-component.956d89c2.js";const R={props:{product:{type:Object,default(){return{category:"",tags:[],unit:"\u576A",direction:"",location:{lat:"",lng:""}}}},isNew:{type:Boolean,default:!1},btnLoading:{type:Boolean,default:!1}},data(){return{imageUploadType:"url",status:{},modal:"",targetCase:{}}},emits:["update-product"],mixins:[D],inject:["emitter"],methods:{uploadFile(){const r=this.$refs.fileInput.files[0],s=new FormData;s.append("file-to-upload",r),this.status.fileUploading=!0,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/found_houses_v2/admin/upload",s,{headers:{"Content-Type":"multipart/form-data"}}).then(b=>{this.status.fileUploading=!1,b.data.success?(this.targetCase.imageUrl=b.data.imageUrl,this.$refs.fileInput.value="",this.$httpMessageState(b,"\u5716\u7247\u4E0A\u50B3\u7D50\u679C",b.data.message)):(this.$refs.fileInput.value="",this.$httpMessageState(b,"\u5716\u7247\u4E0A\u50B3\u7D50\u679C",b.data.message))}).catch(b=>{this.status.fileUploading=!1,this.$httpMessageState(b.response,"\u5716\u7247\u5931\u6557")})}},watch:{product(){this.targetCase=this.product,this.targetCase.imagesUrl||(this.targetCase.imagesUrl=[],this.targetCase.tags=[]),this.targetCase.imageUrl||(this.targetCase.imageUrl="")},targetCase:{handler(){this.targetCase.squareFeet===this.targetCase.mainSquareFeet&&(this.targetCase.managementFee=0)},deep:!0}}},E={class:"modal fade",id:"productModal",ref:"modal"},I={class:"modal-dialog modal-xl",role:"document"},O={class:"modal-content border-0"},H={class:"modal-header bg-dark text-white"},W={class:"modal-title",id:"exampleModalLabel"},j={key:0},z={key:1},G=e("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),J={class:"modal-body"},K={class:"row"},Q={class:"col-sm-4"},X={class:"mb-3"},Y={class:"mb-2"},Z=e("label",{class:"form-label fw-bold",for:"imgFile"},[n("\u7522\u54C1\u4E3B\u8981\u5716\u7247 "),e("small",{class:"text-danger"},"\u203B \u5716\u7247\u5927\u5C0F\u4E0D\u53EF\u8D85\u904E 3 MB")],-1),$={class:"btn-group w-100 mb-1",role:"group","aria-label":"Upload image button group"},ee={key:1,class:"d-flex justify-content-center opacity-50 py-2"},te=e("div",{class:"spinner-border text-dark",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),se=[te],oe=["src"],le=["value"],ae={key:0},ne={key:0},ie={class:"input-group"},re=["onUpdate:modelValue"],de=["onClick"],ce={class:"col-sm-8"},ue=e("ul",{class:"nav nav-tabs mb-3",id:"myTab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"info-tab","data-bs-toggle":"tab","data-bs-target":"#info",type:"button",role:"tab","aria-controls":"info","aria-selected":"true"}," \u5FC5\u586B\u9805\u76EE ")]),e("li",{class:"nav-item"},[e("button",{class:"nav-link",id:"detail-tab","data-bs-toggle":"tab","data-bs-target":"#detail",type:"button",role:"tab","aria-controls":"detail","aria-selected":"false"}," \u8A73\u7D30\u8CC7\u6599 ")]),e("li",{class:"nav-item"},[e("button",{class:"nav-link",id:"tags-tab","data-bs-toggle":"tab","data-bs-target":"#tags",type:"button",role:"tab","aria-controls":"tags","aria-selected":"false"}," \u7279\u8272\u6A19\u7C64 ")])],-1),be={class:"tab-content",id:"myTabContent"},me={class:"tab-pane fade show active",id:"info",role:"tabpanel","aria-labelledby":"info-tab"},pe={class:"row gx-3"},ge={class:"mb-3 col-md-6"},he=e("label",{for:"title",class:"form-label fw-bold"},[n("\u6A19\u984C "),e("span",{class:"text-danger"},"*")],-1),_e={class:"mb-3 col-md-6"},fe=e("label",{for:"category",class:"form-label fw-bold"},[n("\u5206\u985E "),e("span",{class:"text-danger"},"*")],-1),ve=F('<option value="" disabled>\u8ACB\u9078\u64C7</option><option value="\u516C\u5BD3">\u516C\u5BD3</option><option value="\u83EF\u5EC8">\u83EF\u5EC8</option><option value="\u5927\u6A13">\u5927\u6A13</option><option value="\u5225\u5885">\u5225\u5885</option>',5),Ce=[ve],ye={class:"row gx-3"},ke={class:"mb-3 col-md-6"},xe=e("label",{for:"origin_price",class:"form-label fw-bold"},[n("\u7E3D\u50F9 "),e("span",{class:"form-text"}," (\u842C) "),e("span",{class:"text-danger"},"*")],-1),Ue={class:"mb-3 col-md-6"},we=e("label",{for:"price",class:"form-label fw-bold"},[n("\u552E\u50F9 "),e("span",{class:"form-text"}," (\u842C) "),e("span",{class:"text-danger"},"*")],-1),Ve={class:"row"},Le={class:"mb-3 col-md-6"},Me=e("label",{for:"address",class:"form-label fw-bold"},[n("\u5730\u5740 "),e("span",{class:"text-danger"},"*")],-1),Fe={class:"mb-3 col-md-6"},Pe=e("label",{for:"location",class:"form-label fw-bold"},[n("\u5EA7\u6A19 "),e("span",{class:"text-danger"},"*")],-1),Be={class:"row"},Se={class:"mb-3"},Ne=e("label",{for:"content",class:"form-label fw-bold"},[n("\u7269\u4EF6\u8A73\u60C5 "),e("span",{class:"text-danger"},"*")],-1),Te={class:"tab-pane fade",id:"detail",role:"tabpanel","aria-labelledby":"detail-tab"},De={class:"row gx-3"},qe={class:"mb-3 col-md-4"},Ae=e("label",{for:"category",class:"form-label fw-bold"},[n("\u5EFA\u7269\u767B\u8A18 "),e("span",{class:"form-text"}," (\u576A) ")],-1),Re={class:"mb-3 col-md-4"},Ee=e("label",{for:"price",class:"form-label fw-bold"},[n("\u4E3B\u5EFA\u7269 "),e("span",{class:"form-text"}," (\u576A) ")],-1),Ie={class:"mb-3 col-md-4"},Oe=e("label",{for:"houseAge",class:"form-label fw-bold"},[n("\u5C4B\u9F61 "),e("span",{class:"form-text"}," (\u5E74) ")],-1),He={class:"row gx-3"},We={class:"mb-3 col-md-4"},je=e("label",{for:"floor",class:"form-label fw-bold"},[n("\u6A13/\u6A13 "),e("span",{class:"form-text"}," (\u516C\u5BD35\u2193, \u83EF\u5EC85-10, \u5927\u6A1310\u2191) ")],-1),ze={class:"mb-3 col-md-4"},Ge=e("label",{for:"pattern",class:"form-label fw-bold"},[n("\u683C\u5C40 "),e("span",{class:"form-text"}," (\u623F/\u5EF3/\u885B/\u5BA4) ")],-1),Je={class:"mb-3 col-md-4"},Ke=e("label",{for:"category",class:"form-label fw-bold"},"\u5EFA\u7269\u671D\u5411",-1),Qe=F('<option value="" disabled>\u8ACB\u9078\u64C7</option><option value="\u5317">\u5317\u2191</option><option value="\u6771\u5317">\u6771\u5317\u2197</option><option value="\u6771">\u6771\u2192</option><option value="\u6771\u5357">\u6771\u5357\u2198</option><option value="\u5357">\u5357\u2193</option><option value="\u897F\u5357">\u897F\u5357\u2199</option><option value="\u897F">\u897F\u2190</option><option value="\u897F\u5317">\u897F\u5317\u2196</option>',9),Xe=[Qe],Ye={class:"row gx-3"},Ze={class:"mb-3 col-md-4"},$e=e("label",{for:"parking",class:"form-label fw-bold"},"\u8ECA\u4F4D ",-1),et={class:"mb-3 col-md-4"},tt=e("label",{for:"parkingPrice",class:"form-label fw-bold"},[n("\u8ECA\u4F4D\u50F9\u683C "),e("span",{class:"form-text"}," (\u842C) ")],-1),st=["disabled"],ot={class:"mb-3 col-md-4"},lt=e("label",{for:"managementFee",class:"form-label fw-bold"},[n("\u7BA1\u7406\u8CBB "),e("span",{class:"form-text"}," (\u5143/\u6708) ")],-1),at=["disabled"],nt={class:"tab-pane fade",id:"tags",role:"tabpanel","aria-labelledby":"tags-tab"},it={class:"row"},rt={class:"mb-3"},dt=e("label",{for:"",class:"form-label fw-bold fs-6"},"\u7279\u8272\u6A19\u7C64",-1),ct={class:"d-flex flex-wrap"},ut={class:"me-1 mb-1"},bt=e("label",{for:"decorate",class:"btn btn-sm btn-outline-secondary"},"\u6709\u88DD\u6F62",-1),mt={class:"me-1 mb-1"},pt=e("label",{for:"hasView",class:"btn btn-sm btn-outline-secondary"},"\u6709\u666F\u89C0",-1),gt={class:"me-1 mb-1"},ht=e("label",{for:"balcony",class:"btn btn-sm btn-outline-secondary"},"\u6709\u967D\u53F0 ",-1),_t={class:"me-1 mb-1"},ft=e("label",{for:"bathWindow",class:"btn btn-sm btn-outline-secondary"},"\u5EC1\u6240\u958B\u7A97",-1),vt={class:"me-1 mb-1"},Ct=e("label",{for:"roomsHasWindow",class:"btn btn-sm btn-outline-secondary"},"\u623F\u9593\u7686\u6709\u7A97 ",-1),yt={class:"me-1 mb-1"},kt=e("label",{for:"security",class:"btn btn-sm btn-outline-secondary"},"\u8B66\u885B\u7BA1\u7406",-1),xt={class:"me-1 mb-1"},Ut=e("label",{for:"barrierFree",class:"btn btn-sm btn-outline-secondary"},"\u7121\u969C\u7919\u7A7A\u9593",-1),wt={class:"me-1 mb-1"},Vt=e("label",{for:"handleGarbage",class:"btn btn-sm btn-outline-secondary"},"\u5177\u5783\u573E\u8655\u7406",-1),Lt={class:"me-1 mb-1"},Mt=e("label",{for:"gym",class:"btn btn-sm btn-outline-secondary"},"\u5065\u8EAB\u623F",-1),Ft={class:"me-1 mb-1"},Pt=e("label",{for:"garden",class:"btn btn-sm btn-outline-secondary"},"\u82B1\u5712",-1),Bt={class:"me-1 mb-1"},St=e("label",{for:"swimmingPool",class:"btn btn-sm btn-outline-secondary"},"\u6E38\u6CF3\u6C60",-1),Nt={class:"me-1 mb-1"},Tt=e("label",{for:"hasParking",class:"btn btn-sm btn-outline-secondary"},"\u6709\u8ECA\u4F4D",-1),Dt={class:"me-1 mb-1"},qt=e("label",{for:"blankHouse",class:"btn btn-sm btn-outline-secondary"},"\u6BDB\u80DA\u5C4B",-1),At={class:"row"},Rt={class:"mb-3"},Et=e("label",{for:"",class:"form-label fw-bold fs-6"},"\u9130\u8FD1\u8A2D\u65BD",-1),It={class:"d-flex"},Ot={class:"me-1 mb-1"},Ht=e("label",{for:"metro",class:"btn btn-sm btn-outline-secondary"},"\u8FD1\u6377\u904B",-1),Wt={class:"me-1 mb-1"},jt=e("label",{for:"park",class:"btn btn-sm btn-outline-secondary"},"\u8FD1\u516C\u5712",-1),zt={class:"me-1 mb-1"},Gt=e("label",{for:"market",class:"btn btn-sm btn-outline-secondary"},"\u8FD1\u5E02\u5834",-1),Jt={class:"me-1 mb-1"},Kt=e("label",{for:"school",class:"btn btn-sm btn-outline-secondary"},"\u8FD1\u5B78\u6821",-1),Qt={class:"me-1 mb-1"},Xt=e("label",{for:"department",class:"btn btn-sm btn-outline-secondary"},"\u8FD1\u5546\u5708",-1),Yt={class:"row"},Zt={class:"mb-3"},$t=e("label",{for:"",class:"form-label fw-bold fs-6"},"\u7269\u4EF6\u72C0\u6CC1",-1),es={class:"d-flex"},ts={class:"me-1 mb-1"},ss=e("label",{for:"new",class:"btn btn-sm btn-outline-secondary"},"\u65B0\u4E0A\u67B6",-1),os={class:"me-1 mb-1"},ls=e("label",{for:"lowPrice",class:"btn btn-sm btn-outline-secondary"},"\u4F4E\u7E3D\u50F9",-1),as={class:"me-1 mb-1"},ns=e("label",{for:"hottest",class:"btn btn-sm btn-outline-secondary"},"\u5E97\u9577\u63A8\u85A6",-1),is={class:"mb-3"},rs=e("label",{for:"",class:"form-label fw-bold"},[n("\u986F\u793A\u72C0\u6CC1 "),e("span",{class:"text-danger"},"*")],-1),ds={class:"d-flex"},cs={class:"form-check form-check-inline"},us=e("label",{class:"form-check-label text-success",for:"enabled1"},"\u986F\u793A",-1),bs={class:"form-check form-check-inline"},ms=e("label",{class:"form-check-label text-secondary",for:"enabled2"},"\u4E0D\u986F\u793A",-1),ps={class:"form-check form-check-inline"},gs=e("label",{class:"form-check-label text-warning",for:"enabled3"},"\u8655\u7406\u4E2D",-1),hs={class:"form-check form-check-inline"},_s=e("label",{class:"form-check-label text-muted",for:"enabled4"},"\u5DF2\u7D50\u6848",-1),fs={class:"modal-footer"},vs=e("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1),Cs={class:"spinner-border spinner-border-sm"};function ys(r,s,b,f,t,m){return d(),c("div",E,[e("div",I,[e("div",O,[e("div",H,[e("h5",W,[b.isNew?(d(),c("span",j,"\u65B0\u589E\u6848\u4EF6")):(d(),c("span",z,"\u7DE8\u8F2F\u6848\u4EF6"))]),G]),e("div",J,[e("div",K,[e("div",Q,[e("div",X,[e("div",Y,[Z,e("div",$,[e("button",{type:"button",class:k(["btn",t.imageUploadType==="upload"?"btn-primary":"btn-outline-primary"]),onClick:s[0]||(s[0]=o=>t.imageUploadType="upload")}," \u4E0A\u50B3\u5716\u7247 ",2),e("button",{type:"button",class:k(["btn",t.imageUploadType==="url"?"btn-primary":"btn-outline-primary"]),onClick:s[1]||(s[1]=o=>t.imageUploadType="url")}," \u8F38\u5165\u7DB2\u5740 ",2)]),l(e("div",null,[t.status.fileUploading?(d(),c("div",ee,se)):(d(),c("input",{key:0,type:"file",class:"form-control",id:"imgFile",placeholder:"\u8ACB\u9078\u64C7\u8981\u4E0A\u50B3\u7684\u5716\u7247\u6A94\u6848",ref:"fileInput",onChange:s[2]||(s[2]=(...o)=>m.uploadFile&&m.uploadFile(...o))},null,544))],512),[[C,t.imageUploadType==="upload"]]),l(e("input",{type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u7DB2\u5740","aria-label":"\u8F38\u5165\u5716\u7247\u7DB2\u5740","aria-describedby":"button-addon2","onUpdate:modelValue":s[3]||(s[3]=o=>t.targetCase.imageUrl=o)},null,512),[[C,t.imageUploadType==="url"],[u,t.targetCase.imageUrl]])]),l(e("div",null,[e("img",{class:"img-fluid mb-1",src:t.targetCase.imageUrl,alt:"\u7522\u54C1\u4E3B\u5716\u7247",title:"\u7522\u54C1\u4E3B\u5716\u7247"},null,8,oe),e("input",{type:"text",class:"form-control mb-1","aria-label":"\u6B32\u4E0A\u50B3\u7522\u54C1\u5716\u7247",value:t.targetCase.imageUrl,disabled:"",readonly:""},null,8,le)],512),[[C,t.targetCase.imageUrl]])]),t.targetCase.imagesUrl?(d(),c("div",ae,[t.targetCase.imagesUrl[t.targetCase.imagesUrl.length-1]||!t.targetCase.imagesUrl.length?(d(),c("div",ne,[e("button",{class:"btn btn-outline-primary btn-sm d-block w-100 my-2",onClick:s[4]||(s[4]=o=>t.targetCase.imagesUrl.push(""))}," \u65B0\u589E\u5716\u7247 ")])):U("",!0),(d(!0),c(x,null,M(t.targetCase.imagesUrl,(o,g)=>(d(),c("div",{class:"mb-2",key:g},[e("div",ie,[l(e("input",{type:"url",class:"form-control","onUpdate:modelValue":v=>t.targetCase.imagesUrl[g]=v,placeholder:"\u8ACB\u8F38\u5165\u9023\u7D50"},null,8,re),[[u,t.targetCase.imagesUrl[g]]]),e("button",{type:"button",class:"btn btn-outline-secondary",onClick:v=>t.targetCase.imagesUrl.splice(g,1)}," \u79FB\u9664 ",8,de)])]))),128))])):U("",!0)]),e("div",ce,[ue,e("div",be,[e("div",me,[e("div",pe,[e("div",ge,[he,l(e("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":s[5]||(s[5]=o=>t.targetCase.title=o),placeholder:"\u8ACB\u8F38\u5165\u6A19\u984C"},null,512),[[u,t.targetCase.title,void 0,{trim:!0}]])]),e("div",_e,[fe,l(e("select",{class:"form-select",id:"category","onUpdate:modelValue":s[6]||(s[6]=o=>t.targetCase.category=o)},Ce,512),[[w,t.targetCase.category]])])]),e("div",ye,[e("div",ke,[xe,l(e("input",{type:"number",class:"form-control",id:"origin_price",min:"0","onUpdate:modelValue":s[7]||(s[7]=o=>t.targetCase.origin_price=o),placeholder:"\u8ACB\u8F38\u5165\u7E3D\u50F9"},null,512),[[u,t.targetCase.origin_price,void 0,{number:!0}]])]),e("div",Ue,[we,l(e("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":s[8]||(s[8]=o=>t.targetCase.price=o),min:"0",placeholder:"\u8ACB\u8F38\u5165\u552E\u50F9"},null,512),[[u,t.targetCase.price,void 0,{number:!0}]])])]),e("div",Ve,[e("div",Le,[Me,l(e("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":s[9]||(s[9]=o=>t.targetCase.description=o),placeholder:"\u8ACB\u8F38\u5165\u5730\u5740"},null,512),[[u,t.targetCase.description,void 0,{trim:!0}]])]),e("div",Fe,[Pe,l(e("input",{type:"text",class:"form-control",id:"location","onUpdate:modelValue":s[10]||(s[10]=o=>t.targetCase.location=o),placeholder:"\u8ACB\u8F38\u5165\u5EA7\u6A19 ex: xxxx,yyyy..."},null,512),[[u,t.targetCase.location,void 0,{trim:!0}]])])]),e("div",Be,[e("div",Se,[Ne,l(e("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":s[11]||(s[11]=o=>t.targetCase.content=o),placeholder:"\u8ACB\u8F38\u5165\u7269\u4EF6\u8A73\u60C5"},null,512),[[u,t.targetCase.content]])])])]),e("div",Te,[e("div",De,[e("div",qe,[Ae,l(e("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":s[12]||(s[12]=o=>t.targetCase.squareFeet=o),placeholder:"\u8ACB\u8F38\u5165\u5EFA\u7269\u767B\u8A18"},null,512),[[u,t.targetCase.squareFeet,void 0,{number:!0}]])]),e("div",Re,[Ee,l(e("input",{type:"text",class:"form-control",id:"mainSquareFeet","onUpdate:modelValue":s[13]||(s[13]=o=>t.targetCase.mainSquareFeet=o),placeholder:"\u4E3B\u5EFA\u7269\u576A\u6578"},null,512),[[u,t.targetCase.mainSquareFeet,void 0,{number:!0}]])]),e("div",Ie,[Oe,l(e("input",{type:"number",class:"form-control",id:"houseAge","onUpdate:modelValue":s[14]||(s[14]=o=>t.targetCase.houseAge=o),placeholder:"\u8ACB\u8F38\u5165\u5C4B\u9F61"},null,512),[[u,t.targetCase.houseAge,void 0,{number:!0}]])])]),e("div",He,[e("div",We,[je,l(e("input",{type:"text",class:"form-control",id:"floor","onUpdate:modelValue":s[15]||(s[15]=o=>t.targetCase.floor=o),placeholder:"\u8ACB\u8F38\u5165\u6A13\u5C64"},null,512),[[u,t.targetCase.floor,void 0,{trim:!0}]])]),e("div",ze,[Ge,l(e("input",{type:"text",class:"form-control",id:"pattern","onUpdate:modelValue":s[16]||(s[16]=o=>t.targetCase.pattern=o),placeholder:"\u8ACB\u8F38\u5165\u683C\u5C40 (\u623F/\u5EF3/\u885B/\u5BA4)"},null,512),[[u,t.targetCase.pattern,void 0,{trim:!0}]])]),e("div",Je,[Ke,l(e("select",{class:"form-select",id:"category","onUpdate:modelValue":s[17]||(s[17]=o=>t.targetCase.direction=o)},Xe,512),[[w,t.targetCase.direction]])])]),e("div",Ye,[e("div",Ze,[$e,l(e("input",{type:"text",class:"form-control",id:"parking","onUpdate:modelValue":s[18]||(s[18]=o=>t.targetCase.parking=o),placeholder:"\u8ACB\u8F38\u5165\u8ECA\u4F4D"},null,512),[[u,t.targetCase.parking,void 0,{trim:!0}]])]),e("div",et,[tt,l(e("input",{disabled:!t.targetCase.parking,type:"number",class:"form-control",id:"parkingPrice","onUpdate:modelValue":s[19]||(s[19]=o=>t.targetCase.parkingPrice=o),min:"0",placeholder:"\u8ACB\u8F38\u5165\u8ECA\u4F4D\u50F9\u683C"},null,8,st),[[u,t.targetCase.parkingPrice,void 0,{number:!0}]])]),e("div",ot,[lt,l(e("input",{disabled:t.targetCase.squareFeet===t.targetCase.mainSquareFeet,type:"number",class:"form-control",id:"managementFee","onUpdate:modelValue":s[20]||(s[20]=o=>t.targetCase.managementFee=o),min:"0",placeholder:"\u8ACB\u8F38\u5165\u7BA1\u7406\u8CBB"},null,8,at),[[u,t.targetCase.managementFee,void 0,{number:!0}]])])])]),e("div",nt,[e("div",it,[e("div",rt,[dt,e("div",ct,[e("div",ut,[l(e("input",{type:"checkbox",id:"decorate",class:"btn-check",value:"\u6709\u88DD\u6F62","onUpdate:modelValue":s[21]||(s[21]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),bt]),e("div",mt,[l(e("input",{type:"checkbox",id:"hasView",class:"btn-check",value:"\u6709\u666F\u89C0","onUpdate:modelValue":s[22]||(s[22]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),pt]),e("div",gt,[l(e("input",{type:"checkbox",id:"balcony",class:"btn-check",value:"\u6709\u967D\u53F0","onUpdate:modelValue":s[23]||(s[23]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),ht]),e("div",_t,[l(e("input",{type:"checkbox",id:"bathWindow",class:"btn-check",value:"\u5EC1\u6240\u958B\u7A97","onUpdate:modelValue":s[24]||(s[24]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),ft]),e("div",vt,[l(e("input",{type:"checkbox",id:"roomsHasWindow",class:"btn-check",value:"\u623F\u9593\u7686\u6709\u7A97","onUpdate:modelValue":s[25]||(s[25]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Ct]),e("div",yt,[l(e("input",{type:"checkbox",id:"security",class:"btn-check",value:"\u8B66\u885B\u7BA1\u7406","onUpdate:modelValue":s[26]||(s[26]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),kt]),e("div",xt,[l(e("input",{type:"checkbox",id:"barrierFree",class:"btn-check",value:"\u7121\u969C\u7919\u7A7A\u9593","onUpdate:modelValue":s[27]||(s[27]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Ut]),e("div",wt,[l(e("input",{type:"checkbox",id:"handleGarbage",class:"btn-check",value:"\u5177\u5783\u573E\u8655\u7406","onUpdate:modelValue":s[28]||(s[28]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Vt]),e("div",Lt,[l(e("input",{type:"checkbox",id:"gym",class:"btn-check",value:"\u5065\u8EAB\u623F","onUpdate:modelValue":s[29]||(s[29]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Mt]),e("div",Ft,[l(e("input",{type:"checkbox",id:"garden",class:"btn-check",value:"\u82B1\u5712","onUpdate:modelValue":s[30]||(s[30]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Pt]),e("div",Bt,[l(e("input",{type:"checkbox",id:"swimmingPool",class:"btn-check",value:"\u6E38\u6CF3\u6C60","onUpdate:modelValue":s[31]||(s[31]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),St]),e("div",Nt,[l(e("input",{type:"checkbox",id:"hasParking",class:"btn-check",value:"\u6709\u8ECA\u4F4D","onUpdate:modelValue":s[32]||(s[32]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Tt]),e("div",Dt,[l(e("input",{type:"checkbox",id:"blankHouse",class:"btn-check",value:"\u6BDB\u80DA\u5C4B","onUpdate:modelValue":s[33]||(s[33]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),qt])])])]),e("div",At,[e("div",Rt,[Et,e("div",It,[e("div",Ot,[l(e("input",{type:"checkbox",id:"metro",class:"btn-check",value:"\u8FD1\u6377\u904B","onUpdate:modelValue":s[34]||(s[34]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Ht]),e("div",Wt,[l(e("input",{type:"checkbox",id:"park",class:"btn-check",value:"\u8FD1\u516C\u5712","onUpdate:modelValue":s[35]||(s[35]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),jt]),e("div",zt,[l(e("input",{type:"checkbox",id:"market",class:"btn-check",value:"\u8FD1\u5E02\u5834","onUpdate:modelValue":s[36]||(s[36]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Gt]),e("div",Jt,[l(e("input",{type:"checkbox",id:"school",class:"btn-check",value:"\u8FD1\u5B78\u6821","onUpdate:modelValue":s[37]||(s[37]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Kt]),e("div",Qt,[l(e("input",{type:"checkbox",id:"department",class:"btn-check",value:"\u8FD1\u5546\u5708","onUpdate:modelValue":s[38]||(s[38]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),Xt])])])]),e("div",Yt,[e("div",Zt,[$t,e("div",es,[e("div",ts,[l(e("input",{type:"checkbox",id:"new",class:"btn-check",value:"\u65B0\u4E0A\u67B6","onUpdate:modelValue":s[39]||(s[39]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),ss]),e("div",os,[l(e("input",{type:"checkbox",id:"lowPrice",class:"btn-check",value:"\u4F4E\u7E3D\u50F9","onUpdate:modelValue":s[40]||(s[40]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),ls]),e("div",as,[l(e("input",{type:"checkbox",id:"hottest",class:"btn-check",value:"\u5E97\u9577\u63A8\u85A6","onUpdate:modelValue":s[41]||(s[41]=o=>t.targetCase.tags=o)},null,512),[[i,t.targetCase.tags]]),ns])])])])])]),e("div",is,[rs,e("div",ds,[e("div",cs,[l(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[42]||(s[42]=o=>t.targetCase.is_enabled=o),name:"inlineRadioOptions",id:"enabled1",value:"1"},null,512),[[y,t.targetCase.is_enabled,void 0,{number:!0}]]),us]),e("div",bs,[l(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[43]||(s[43]=o=>t.targetCase.is_enabled=o),name:"inlineRadioOptions",id:"enabled2",value:"0"},null,512),[[y,t.targetCase.is_enabled,void 0,{number:!0}]]),ms]),e("div",ps,[l(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[44]||(s[44]=o=>t.targetCase.is_enabled=o),name:"inlineRadioOptions",id:"enabled3",value:"2"},null,512),[[y,t.targetCase.is_enabled,void 0,{number:!0}]]),gs]),e("div",hs,[l(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[45]||(s[45]=o=>t.targetCase.is_enabled=o),name:"inlineRadioOptions",id:"enabled4",value:"3"},null,512),[[y,t.targetCase.is_enabled,void 0,{number:!0}]]),_s])])])])])]),e("div",fs,[vs,e("button",{type:"button",class:"btn btn-primary",onClick:s[46]||(s[46]=o=>r.$emit("update-product",t.targetCase))},[n(" \u78BA\u8A8D "),l(e("span",Cs,null,512),[[C,b.btnLoading]])])])])])],512)}const ks=L(R,[["render",ys]]),xs={components:{AdminBreadcrumb:T,Pagination:q,CaseEditModal:ks,DelConfirmModal:A},data(){return{isLoading:!1,submitBtnLoading:!1,targetCase:{imagesUrl:[],category:"",tags:[],location:""},cases:[],pagination:{},isNew:!1,currentPage:1}},methods:{openModal(r,s){r?(this.targetCase={imagesUrl:[],category:"",unit:"\u576A",is_enabled:1,tags:[]},this.isNew=!0):(this.targetCase={...s},this.isNew=!1),this.$refs.caseModal.openModal()},updateCase(r){this.targetCase={...r},this.isLoading=!0,this.submitBtnLoading=!0;let s="https://vue3-course-api.hexschool.io/v2//api/found_houses_v2/admin/product",b="post",f="\u65B0\u589E\u6848\u4EF6";this.isNew||(s=`https://vue3-course-api.hexschool.io/v2//api/found_houses_v2/admin/product/${this.targetCase.id}`,b="put",f="\u66F4\u65B0\u6848\u4EF6"),this.$http[b](s,{data:this.targetCase}).then(t=>{this.isLoading=!1,this.submitBtnLoading=!1,this.$httpMessageState(t,f),this.$refs.caseModal.closeModal(),this.getCasesList(this.currentPage)}).catch(t=>{this.isLoading=!1,this.submitBtnLoading=!1,this.$httpMessageState(t.response,f)})},getCasesList(r=1){this.isLoading=!0,this.currentPage=r,this.$http.get(`https://vue3-course-api.hexschool.io/v2//api/found_houses_v2/admin/products/?page=${r}`).then(s=>{this.cases=s.data.products,this.pagination=s.data.pagination,this.isLoading=!1}).catch(s=>{this.isLoading=!1,this.$httpMessageState(s.response,"\u932F\u8AA4\u8A0A\u606F")})},openDelModal(r){this.targetCase={...r},this.$refs.delModal.openModal()},deleteCase(){this.isLoading=!0,this.submitBtnLoading=!0,this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/found_houses_v2/admin/product/${this.targetCase.id}`).then(r=>{this.isLoading=!1,this.submitBtnLoading=!1,this.$httpMessageState(r,"\u522A\u9664\u6848\u4EF6"),this.$refs.delModal.closeModal(),this.getCasesList(this.currentPage)}).catch(r=>{this.isLoading=!1,this.submitBtnLoading=!1,this.$httpMessageState(r.response,"\u522A\u9664\u6848\u4EF6")})}},mounted(){this.getCasesList()}},Us={class:"main-content container-fluid px-4 bg-light"},ws=e("h3",{class:"my-4 fw-bold"},"\u6848\u4EF6\u7BA1\u7406",-1),Vs={class:"text-end my-2"},Ls=e("i",{class:"bi bi-plus-square"},null,-1),Ms={class:"table table-hover table-striped table-bordered mt-4 text-center shadow-sm"},Fs=e("thead",{class:"table-dark"},[e("tr",null,[e("th",{width:"5%"},"\u9806\u5E8F"),e("th",{width:"10%"},"\u6848\u4EF6\u5716\u7247"),e("th",{width:"55%",class:"text-start"},"\u6848\u4EF6\u540D\u7A31"),e("th",{width:"5%"},"\u539F\u50F9"),e("th",{width:"5%"},"\u552E\u50F9"),e("th",{width:"5%"},"\u8ECA\u4F4D\u552E\u50F9"),e("th",{width:"5%"},"\u662F\u5426\u986F\u793A"),e("th",{width:"10%"},"\u64CD\u4F5C")])],-1),Ps=["src"],Bs={class:"text-start"},Ss={key:0},Ns={key:1},Ts={key:0,class:"text-success"},Ds={key:1,class:"text-warning"},qs={key:2,class:"text-muted"},As={key:3,class:"text-danger"},Rs={class:"btn-group"},Es=["onClick"],Is=e("i",{class:"bi bi-pencil-square"},null,-1),Os=["onClick"],Hs=e("i",{class:"bi bi-trash3"},null,-1);function Ws(r,s,b,f,t,m){const o=h("LoadingComponent"),g=h("AdminBreadcrumb"),v=h("RouterLink"),P=h("Pagination"),B=h("CaseEditModal"),S=h("DelConfirmModal");return d(),c(x,null,[e("div",Us,[_(o,{isLoading:t.isLoading},null,8,["isLoading"]),ws,_(g),e("div",Vs,[e("button",{type:"button",class:"btn btn-success text-white shadow-sm",onClick:s[0]||(s[0]=a=>m.openModal(!0))},[Ls,n(" \u5EFA\u7ACB\u65B0\u7684\u6848\u4EF6 ")])]),e("table",Ms,[Fs,e("tbody",null,[(d(!0),c(x,null,M(t.cases,a=>(d(),c("tr",{key:a.id,style:{"vertical-align":"middle"}},[e("td",null,p(a.num),1),e("td",null,[e("img",{class:"img-fluid",src:a.imageUrl},null,8,Ps)]),e("td",Bs,[e("span",{class:k(["badge tag__element me-1",{"tag__element--main":a.category==="\u83EF\u5EC8","tag__element--sec":a.category==="\u516C\u5BD3","tag__element--third":a.category==="\u5225\u5885","tag__element--fourth":a.category==="\u5927\u6A13"}])},p(a.category),3),_(v,{to:`/case/${a.id}`,target:"_blank"},{default:V(()=>[n(p(a.title),1)]),_:2},1032,["to"])]),e("td",null,p(r.$format.currencyFormat(a.origin_price))+"\u842C",1),e("td",{class:k({"text-danger":a.origin_price>a.price})},p(r.$format.currencyFormat(a.price))+"\u842C ",3),e("td",null,[a.parkingPrice>0?(d(),c("span",Ss,p(a.parkingPrice)+"\u842C",1)):(d(),c("span",Ns,"--"))]),e("td",null,[a.is_enabled=="1"?(d(),c("span",Ts,"\u986F\u793A")):a.is_enabled=="2"?(d(),c("span",Ds,"\u8655\u7406\u4E2D")):a.is_enabled=="3"?(d(),c("span",qs,"\u5DF2\u7D50\u6848")):(d(),c("span",As,"\u4E0D\u986F\u793A"))]),e("td",null,[e("div",Rs,[e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:N=>m.openModal(!1,a)},[Is,n(" \u7DE8\u8F2F ")],8,Es),e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:N=>m.openDelModal(a)},[Hs,n(" \u522A\u9664 ")],8,Os)])])]))),128))])]),_(P,{pages:t.pagination,onEmitPages:m.getCasesList},null,8,["pages","onEmitPages"])]),_(B,{product:t.targetCase,isNew:t.isNew,btnLoading:t.submitBtnLoading,onUpdateProduct:m.updateCase,ref:"caseModal"},null,8,["product","isNew","btnLoading","onUpdateProduct"]),_(S,{item:t.targetCase,onDelItem:m.deleteCase,btnLoading:t.submitBtnLoading,ref:"delModal"},{"modal-text":V(()=>[n(" \u6848\u4EF6\u540D\u7A31\uFF1A"+p(t.targetCase.title),1)]),_:1},8,["item","onDelItem","btnLoading"])],64)}const Ks=L(xs,[["render",Ws]]);export{Ks as default};
