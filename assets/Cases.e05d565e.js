import{C as k}from"./CaseCardLayout.1673ce3e.js";import{_ as C,r as m,o,q as H,f as x,b as t,c as d,d as _,x as h,t as g,u as n,s as b,F as L,y,n as l,a as p}from"./index.b5b273c8.js";import{C as B}from"./CaseBreadcrumb.5050bc79.js";const F={props:{item:{type:Object,default(){return{}}},cardLoading:{type:Boolean}}},S={class:"case-item__card case-item__card--listStyle"},q={class:"d-block d-lg-flex align-items-center"},A={key:0,class:"card-image"},T={class:"card-tag"},M={key:0,class:"tag"},D={class:"badge tag__element tag__element--sec"},E=t("i",{class:"bi bi-arrow-down"},null,-1),z={class:"card-price d-block d-lg-none"},I={class:"card-price__price card-price__price--selling"},N=t("span",{class:"card-price__price-unit"},"\u842C",-1),V={key:0,class:"card-price__price card-price__price--origin fs-6"},$=["src"],j={class:"card-body"},P={class:"card-title text-lg-left text-truncate fw-bold position-relative"},R={class:"card-price d-none d-lg-flex align-items-center"},U={class:"card-price__price card-price__price--selling"},W=t("span",{class:"card-price__price-unit"},"\u842C",-1),O={class:"card-description d-none d-lg-inline-block"},G={class:"card-text"},J={class:"card-text-list"},K={class:"card-text-list__item"},Q={class:"card-text-list__item"},X={class:"card-text-list__item"},Y={class:"card-text-list card-text-list--light d-none d-lg-block"},Z={class:"card-text-list__item card-text-list__item--parking"},tt={class:"card-text__icon card-text__icon-parking"},et={class:"card-feature-tag p-0 m-0 d-none d-lg-inline-block"};function st(i,s,e,v,r,c){const f=m("RouterLink");return o(),H(f,{class:l(["card text-decoration-none rounded-0 text-dark",{"is-loading":e.cardLoading}]),to:`/case/${e.item.id}`},{default:x(()=>[t("div",S,[t("div",q,[e.item.imageUrl?(o(),d("div",A,[_(t("div",T,[e.item.origin_price!==e.item.price?(o(),d("div",M,[_(t("span",D,[E,g(" "+n(i.$format.calToPercent(e.item.origin_price,e.item.price,"discount")),1)],512),[[h,e.item.origin_price&&e.item.price]])])):b("",!0),(o(!0),d(L,null,y(i.$format.filterItemTag(e.item),u=>(o(),d("div",{class:"tag",key:u},[t("span",{class:l(["badge tag__element",{"tag__element--third":u==="\u65B0\u4E0A\u67B6","tag__element--fourth":u==="\u4F4E\u7E3D\u50F9","tag__element--main":u==="\u5E97\u9577\u63A8\u85A6"}])},n(u),3)]))),128))],512),[[h,!e.cardLoading]]),t("div",z,[t("span",I,[g(n(i.$format.currencyFormat(e.item.price))+" ",1),N]),e.item.origin_price!==e.item.price?(o(),d("small",V,[t("del",null,n(i.$format.currencyFormat(e.item.origin_price))+" \u842C",1)])):b("",!0)]),t("img",{class:"img-fluid",src:e.item.imageUrl,alt:""},null,8,$)])):b("",!0),t("div",j,[t("h5",P,[g(n(e.cardLoading?"":e.item.title)+" ",1),t("div",R,[_(t("span",U,[g(n(i.$format.currencyFormat(e.item.price))+" ",1),W],512),[[h,!e.cardLoading]])])]),t("h6",O,n(e.cardLoading?"":e.item.description),1),t("div",G,[t("div",J,[t("span",K,n(e.cardLoading?"":e.item.squareFeet+"\u576A"),1),t("span",Q,n(e.cardLoading?"":i.$format.patternFormat(e.item.pattern)),1),t("span",X,n(e.cardLoading?"":e.item.houseAge+"\u5E74"),1)]),t("div",Y,[_(t("div",Z,[_(t("span",tt,"P ",512),[[h,!e.cardLoading]]),g(" "+n(e.cardLoading?"":e.item.parking),1)],512),[[h,e.item.parking]])]),t("ul",et,[(o(!0),d(L,null,y(e.item.tags,u=>(o(),d("li",{class:"badge card-feature-tag__item",key:u},n(e.cardLoading?"":u),1))),128))])])])])])]),_:1},8,["class","to"])}const it=C(F,[["render",st]]),at={components:{CaseCard:k,CaseList:it,CaseBreadcrumb:B},data(){return{cases:[],sortCases:[],filterCategory:"",sortBy:"",cardLoading:!1,cardLayout:"card"}},methods:{getCaseList(i){this.cardLoading=!0;let s="https://vue3-course-api.hexschool.io/v2//api/found_houses_v2/products/all";i&&(s=`https://vue3-course-api.hexschool.io/v2//api/found_houses_v2/products?category=${i}`),this.$http.get(s).then(e=>{this.cases=e.data.products,setTimeout(()=>{this.cardLoading=!1},1e3)}).catch(e=>{this.$httpMessageState(e.response,"\u932F\u8AA4\u8A0A\u606F")})},sortCaseList(i){switch(i){case"priceLow2High":this.cases.sort((s,e)=>s.price-e.price),this.$refs.currentSort.innerHTML="\u552E\u50F9\u5F9E \u4F4E > \u9AD8";break;case"priceHigh2Low":this.cases.sort((s,e)=>e.price-s.price),this.$refs.currentSort.innerHTML="\u552E\u50F9\u5F9E \u9AD8 > \u4F4E";break;case"houseAgeLow2High":this.cases.sort((s,e)=>s.houseAge-e.houseAge),this.$refs.currentSort.innerHTML="\u5C4B\u9F61\u5F9E \u4F4E > \u9AD8";break;case"houseAgeHigh2Low":this.cases.sort((s,e)=>e.houseAge-s.houseAge),this.$refs.currentSort.innerHTML="\u5C4B\u9F61\u5F9E \u9AD8 > \u4F4E";break;case"squareFeetLow2High":this.cases.sort((s,e)=>s.squareFeet-e.squareFeet),this.$refs.currentSort.innerHTML="\u576A\u6578\u5F9E \u5C0F > \u5927";break;case"squareFeetHight2Low":this.cases.sort((s,e)=>e.squareFeet-s.squareFeet),this.$refs.currentSort.innerHTML="\u576A\u6578\u5F9E \u5927 > \u5C0F";break;default:console.log(i),this.cases.sort((s,e)=>e.num-s.num),this.$refs.currentSort.innerHTML="\u9810\u8A2D\u986F\u793A";break}this.sortBy=i},getCaseCardLayout(){const i=localStorage.getItem("card_layout");return i==null?"card":(localStorage.setItem("card_layout",i),i)},handleCardLayout(i){this.cardLayout=i,this.cardLoading=!0,setTimeout(()=>{this.cardLoading=!1,localStorage.setItem("card_layout",this.cardLayout)},1e3)},resizeWidth(){window.matchMedia("(max-width: 767px)").matches&&(this.cardLayout="card")}},watch:{$route(){this.filterCategory=this.$route.query.category,(this.filterCategory!==this.$route.query.category||this.filterCategory===void 0)&&this.getCaseList()},cardLayout:{handler(){this.handleCardLayout(this.cardLayout)}}},computed:{filterEnabledData(){return this.cases.filter(i=>i.is_enabled==1)}},mounted(){this.filterCategory=this.$route.query.category,this.cardLayout=this.getCaseCardLayout(),this.getCaseList(this.filterCategory),this.handleCardLayout(this.cardLayout),window.addEventListener("resize",this.resizeWidth())}},ot={class:"site-content"},rt={class:"category-header py-3"},ct={class:"container"},nt={class:"row row-cols-lg-auto g-3 align-items-center justify-content-between"},dt={class:"col-12"},lt={class:"dropdown cases-sort"},ut={class:"btn cases-sort-status dropdown-toggle",type:"button",id:"dropdownButton","data-bs-toggle":"dropdown","aria-expanded":"false",ref:"currentSort"},_t={class:"dropdown-menu cases-sort-select","aria-labelledby":"dropdownButton"},ht={class:"col-12 d-none d-lg-block"},gt={class:"cases-card-display"},mt=t("i",{class:"bi bi-grid fs-3 cases-card-display__icon"},null,-1),Lt=t("i",{class:"bi bi-list-ul fs-3 cases-card-display__icon"},null,-1),yt={class:"category-cases pb-3"},ft={class:"container"},bt={class:"row row-cols-1 row-cols-md-3 row-cols-lg-4 g-2"},pt={class:"row row-cols-1 g-2"};function Ct(i,s,e,v,r,c){const f=m("CaseBreadcrumb"),u=m("CaseCard"),w=m("CaseList");return o(),d("div",ot,[p(f),t("section",rt,[t("div",ct,[t("div",nt,[t("div",dt,[t("div",lt,[t("button",ut," \u9810\u8A2D\u986F\u793A ",512),t("ul",_t,[t("li",null,[t("button",{type:"button",class:l(["dropdown-item cases-sort-select__option",{active:r.sortBy===""}]),onClick:s[0]||(s[0]=a=>c.sortCaseList(""))}," \u9810\u8A2D\u986F\u793A ",2)]),t("li",null,[t("button",{type:"button",class:l(["dropdown-item cases-sort-select__option",{active:r.sortBy==="priceLow2High"}]),onClick:s[1]||(s[1]=a=>c.sortCaseList("priceLow2High"))}," \u552E\u50F9\u5F9E \u4F4E > \u9AD8 ",2)]),t("li",null,[t("button",{type:"button",class:l(["dropdown-item cases-sort-select__option",{active:r.sortBy==="priceHigh2Low"}]),onClick:s[2]||(s[2]=a=>c.sortCaseList("priceHigh2Low"))}," \u552E\u50F9\u5F9E \u9AD8 > \u4F4E ",2)]),t("li",null,[t("button",{type:"button",class:l(["dropdown-item cases-sort-select__option",{active:r.sortBy==="houseAgeLow2High"}]),onClick:s[3]||(s[3]=a=>c.sortCaseList("houseAgeLow2High"))}," \u5C4B\u9F61\u5F9E \u4F4E > \u9AD8 ",2)]),t("li",null,[t("button",{type:"button",class:l(["dropdown-item cases-sort-select__option",{active:r.sortBy==="houseAgeHigh2Low"}]),onClick:s[4]||(s[4]=a=>c.sortCaseList("houseAgeHigh2Low"))}," \u5C4B\u9F61\u5F9E \u9AD8 > \u4F4E ",2)]),t("li",null,[t("button",{type:"button",class:l(["dropdown-item cases-sort-select__option",{active:r.sortBy==="squareFeetLow2High"}]),onClick:s[5]||(s[5]=a=>c.sortCaseList("squareFeetLow2High"))}," \u576A\u6578\u5F9E \u5C0F > \u5927 ",2)]),t("li",null,[t("button",{type:"button",class:l(["dropdown-item cases-sort-select__option",{active:r.sortBy==="squareFeetHight2Low"}]),onClick:s[6]||(s[6]=a=>c.sortCaseList("squareFeetHight2Low"))}," \u576A\u6578\u5F9E \u5927 > \u5C0F ",2)])])])]),t("div",ht,[t("div",gt,[t("span",{class:l(["cases-card-display__button",{isActive:this.cardLayout==="card"}]),onClick:s[7]||(s[7]=a=>c.handleCardLayout("card"))},[mt,g(" \u5361\u7247 ")],2),t("span",{class:l(["cases-card-display__button",{isActive:this.cardLayout==="list"}]),onClick:s[8]||(s[8]=a=>c.handleCardLayout("list"))},[Lt,g(" \u5217\u8868 ")],2)])])])])]),t("section",yt,[t("div",ft,[_(t("div",bt,[(o(!0),d(L,null,y(c.filterEnabledData,a=>(o(),d("div",{class:"col",key:a.id},[p(u,{item:a,cardLoading:r.cardLoading},null,8,["item","cardLoading"])]))),128))],512),[[h,r.cardLayout==="card"]]),_(t("div",pt,[(o(!0),d(L,null,y(c.filterEnabledData,a=>(o(),d("div",{class:"col pb-lg-3",key:a.id},[p(w,{item:a,cardLoading:r.cardLoading},null,8,["item","cardLoading"])]))),128))],512),[[h,r.cardLayout==="list"]])])])])}const Ht=C(at,[["render",Ct]]);export{Ht as default};
